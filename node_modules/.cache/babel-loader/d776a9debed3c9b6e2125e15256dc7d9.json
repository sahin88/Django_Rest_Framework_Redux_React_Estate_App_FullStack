{"ast":null,"code":"import _regeneratorRuntime from\"/home/alex/Documents/clone/estate-real-appp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/alex/Documents/clone/estate-real-appp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{setAlert}from\"./alert\";import axios from\"axios\";import{SIGNUP_SUCESS,SIGNUP_FAIL,LOGIN_SUCESS,LOGIN_FAIL,LOGOUT}from\"./types\";import Signup from\"../container/Signup\";export var login=function login(email,password){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:config={headers:{\"Content-Type\":\"application/json\"}};body=JSON.stringify({email:email,password:password});_context.prev=2;_context.next=5;return axios.post(\"https://estate-real-appp.herokuapp.com/account/login/\",body,config);case 5:res=_context.sent;dispatch({type:LOGIN_SUCESS,payload:res.data});alert(\" has beeen done \");// dispatch({\n_context.next=15;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);dispatch({type:LOGIN_FAIL});console.log(\"it  has not been submitted\");console.log(\"error\",_context.t0);// dispatch({\ncase 15:case\"end\":return _context.stop();}}},_callee,null,[[2,10]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var signup=function signup(username,email,password,password2){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:config={headers:{\"Content-Type\":\"application/json\"}};body=JSON.stringify({username:username,email:email,password:password,password2:password2});console.log(\"signup body\",body);_context2.prev=3;_context2.next=6;return axios.post(\"https://estate-real-appp.herokuapp.com/account/register/\",body,config);case 6:res=_context2.sent;dispatch({type:SIGNUP_SUCESS,payload:res.data});dispatch(login(email,password));_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](3);console.log(\"error\",_context2.t0);// dispatch({\n//   type: SIGNUP_FAIL,\n// });\n// dispatch(setAlert(\"Error\", err));\ncase 14:case\"end\":return _context2.stop();}}},_callee2,null,[[3,11]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var logout=function logout(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:localStorage.removeItem(\"token\");_context3.next=3;return axios.post(\"https://estate-real-appp.herokuapp.com/account/logout/\").then(function(res){console.log(\"asker\");}).catch(function(err){console.log(\"adem \");});case 3:dispatch({type:LOGOUT});case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};","map":{"version":3,"sources":["/home/alex/Documents/clone/estate-real-appp/src/actions/auth.js"],"names":["setAlert","axios","SIGNUP_SUCESS","SIGNUP_FAIL","LOGIN_SUCESS","LOGIN_FAIL","LOGOUT","Signup","login","email","password","dispatch","config","headers","body","JSON","stringify","post","res","type","payload","data","alert","console","log","signup","username","password2","logout","localStorage","removeItem","then","catch","err"],"mappings":"iUAAA,OAASA,QAAT,KAAyB,SAAzB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OACEC,aADF,CAEEC,WAFF,CAGEC,YAHF,CAIEC,UAJF,CAKEC,MALF,KAMO,SANP,CAOA,MAAOC,CAAAA,MAAP,KAAmB,qBAAnB,CAEA,MAAO,IAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,KAAD,CAAQC,QAAR,iGAAqB,iBAAOC,QAAP,sIAClCC,MADkC,CACzB,CACbC,OAAO,CAAE,CACP,eAAgB,kBADT,CADI,CADyB,CAOlCC,IAPkC,CAO3BC,IAAI,CAACC,SAAL,CAAe,CAAEP,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAAf,CAP2B,uCAapBT,CAAAA,KAAK,CAACgB,IAAN,CAChB,uDADgB,CAEhBH,IAFgB,CAGhBF,MAHgB,CAboB,QAahCM,GAbgC,eAkBtCP,QAAQ,CAAC,CACPQ,IAAI,CAAEf,YADC,CAEPgB,OAAO,CAAEF,GAAG,CAACG,IAFN,CAAD,CAAR,CAIAC,KAAK,CAAC,kBAAD,CAAL,CAEA;AAxBsC,iFA0BtCX,QAAQ,CAAC,CACPQ,IAAI,CAAEd,UADC,CAAD,CAAR,CAGAkB,OAAO,CAACC,GAAR,CAAY,4BAAZ,EACAD,OAAO,CAACC,GAAR,CAAY,OAAZ,cACA;AA/BsC,qEAArB,gEAAd,CAmCP,MAAO,IAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACC,QAAD,CAAWjB,KAAX,CAAkBC,QAAlB,CAA4BiB,SAA5B,kGAA0C,kBAC9DhB,QAD8D,0IAGxDC,MAHwD,CAG/C,CACbC,OAAO,CAAE,CACP,eAAgB,kBADT,CADI,CAH+C,CAQxDC,IARwD,CAQjDC,IAAI,CAACC,SAAL,CAAe,CAAEU,QAAQ,CAARA,QAAF,CAAYjB,KAAK,CAALA,KAAZ,CAAmBC,QAAQ,CAARA,QAAnB,CAA6BiB,SAAS,CAATA,SAA7B,CAAf,CARiD,CAS9DJ,OAAO,CAACC,GAAR,CAAY,aAAZ,CAA2BV,IAA3B,EAT8D,wCAW1Cb,CAAAA,KAAK,CAACgB,IAAN,CAChB,0DADgB,CAEhBH,IAFgB,CAGhBF,MAHgB,CAX0C,QAWtDM,GAXsD,gBAgB5DP,QAAQ,CAAC,CACPQ,IAAI,CAAEjB,aADC,CAEPkB,OAAO,CAAEF,GAAG,CAACG,IAFN,CAAD,CAAR,CAKAV,QAAQ,CAACH,KAAK,CAACC,KAAD,CAAQC,QAAR,CAAN,CAAR,CArB4D,qFAuB5Da,OAAO,CAACC,GAAR,CAAY,OAAZ,eACA;AACA;AACA;AACA;AA3B4D,uEAA1C,kEAAf,CA+BP,MAAO,IAAMI,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,mGAAM,kBAAOjB,QAAP,sHAC1BkB,YAAY,CAACC,UAAb,CAAwB,OAAxB,EAD0B,uBAEpB7B,CAAAA,KAAK,CACRgB,IADG,CACE,wDADF,EAEHc,IAFG,CAEE,SAACb,GAAD,CAAS,CACbK,OAAO,CAACC,GAAR,CAAY,OAAZ,EACD,CAJG,EAKHQ,KALG,CAKG,SAACC,GAAD,CAAS,CACdV,OAAO,CAACC,GAAR,CAAY,OAAZ,EACD,CAPG,CAFoB,QAW1Bb,QAAQ,CAAC,CACPQ,IAAI,CAAEb,MADC,CAAD,CAAR,CAX0B,wDAAN,kEAAf","sourcesContent":["import { setAlert } from \"./alert\";\nimport axios from \"axios\";\nimport {\n  SIGNUP_SUCESS,\n  SIGNUP_FAIL,\n  LOGIN_SUCESS,\n  LOGIN_FAIL,\n  LOGOUT,\n} from \"./types\";\nimport Signup from \"../container/Signup\";\n\nexport const login = (email, password) => async (dispatch) => {\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  };\n\n  const body = JSON.stringify({ email, password });\n\n  try {\n    // axios.defaults.headers = {\n    //   \"Content-Type\": \"application/json\",\n    // };\n    const res = await axios.post(\n      \"https://estate-real-appp.herokuapp.com/account/login/\",\n      body,\n      config\n    );\n    dispatch({\n      type: LOGIN_SUCESS,\n      payload: res.data,\n    });\n    alert(\" has beeen done \");\n\n    // dispatch({\n  } catch (err) {\n    dispatch({\n      type: LOGIN_FAIL,\n    });\n    console.log(\"it  has not been submitted\");\n    console.log(\"error\", err);\n    // dispatch({\n  }\n};\n\nexport const signup = (username, email, password, password2) => async (\n  dispatch\n) => {\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  };\n  const body = JSON.stringify({ username, email, password, password2 });\n  console.log(\"signup body\", body);\n  try {\n    const res = await axios.post(\n      \"https://estate-real-appp.herokuapp.com/account/register/\",\n      body,\n      config\n    );\n    dispatch({\n      type: SIGNUP_SUCESS,\n      payload: res.data,\n    });\n\n    dispatch(login(email, password));\n  } catch (err) {\n    console.log(\"error\", err);\n    // dispatch({\n    //   type: SIGNUP_FAIL,\n    // });\n    // dispatch(setAlert(\"Error\", err));\n  }\n};\n\nexport const logout = () => async (dispatch) => {\n  localStorage.removeItem(\"token\");\n  await axios\n    .post(\"https://estate-real-appp.herokuapp.com/account/logout/\")\n    .then((res) => {\n      console.log(\"asker\");\n    })\n    .catch((err) => {\n      console.log(\"adem \");\n    });\n\n  dispatch({\n    type: LOGOUT,\n  });\n};\n"]},"metadata":{},"sourceType":"module"}